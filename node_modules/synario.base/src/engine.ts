import * as types_mod from "./types";
/**
 * version:0.0.1
 * last update:2024-04-19
 * how to import: import {Synario} from './engine.js'; (use esm import)
 * usage: Synario.engine.start((tick)=>{console.log(tick);});
 *       Synario.engine.stop();
 */
/**
 * 封装了 requestAnimationFrame函数
 * 使用：
 * Engine.start(TFrameDelegate = (tick: number) => void);
 */
export class Engine {
  static tick: number;
  static work: types_mod.FrameHandler;
  static start(work: types_mod.FrameHandler) {
    Engine.tick = 0;
    Engine.work = work;
    Engine.#frame();
  }

  static #id: number;
  static #frame() {
    Engine.#id = requestAnimationFrame(Engine.#frame);
    Engine.work(Engine.tick++);
  }
  static stop() {
    cancelAnimationFrame(Engine.#id);
  }
}
